
<div id="oj-hybrid-padding"  style='position:relative;'>
    <div id='rBmain-header'>
        <button class="buttonIcon2 arrLeft"
                data-bind=" click: rebackToClick,
                               ojComponent: {
                                   component:'ojButton', 
                                   icons: {start:'oj-fwk-icon-caret-start oj-fwk-icon'}, 
                                   label: ''
                               }">
        </button>
        
        <h3 id="header" class="itemTitle" data-bind="text:dl.headerTitle"></h3>
    </div> 
    <div id='mainmenu' style=" position: relative;" data-bind="visible: ulShow()==0">
     <ul class='list' style="margin-top: 70px">
        <li>
            <span class="title">申 请 人：</span></br>   <span data-bind="text:dl.getLabelByValue('employees', __employeeId())"></span>
        </li>
        <li>
            <span class="title">归属公司：</span>   <span data-bind="text:dl.getLabelByValue('system_dictionary_26', __companyId())"></span>
        </li>
        <li>
            <span class="title">工号：</span>   <span data-bind="text: __employeeNo()"></span>
        </li>
        <li>
            <span class="title">所在部门：</span>   <span data-bind="text:dl.getLabelByValue('all_departments', __departmentId())"></span>
        </li>
        <li>
            <span class="title"><i class="star">*</i>手机号码：</span>   <input data-bind="value: __card" />
        </li>
        <li>
            <span class="title"><i class="star">*</i>同行人数：</span>   <input data-bind="value: __unit" />
        </li>
        <li>
            <span class="title"><i class="star">*</i>用车开始时间：</span>   
            <input id="projecttest-completed_time" data-bind="ojComponent: {component: 'ojInputDateTime', value: __startDate, converter: dl.dateTimeConverter}"/>
        </li>
        <li>
            <span class="title"><i class="star">*</i>预计结束时间：</span>   
            <input id="projecttest-completed_time"  data-bind="ojComponent: {component: 'ojInputDateTime', value: __endDate, converter: dl.dateTimeConverter}"/>
        </li>
        <li>
            <span class="title"><i class="star">*</i>用车类型：</span> 
            <select id="basicSelect2" data-bind="ojComponent: {component: 'ojSelect',value: __startDateDetail,rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('system_dictionary_119', false)}">
            </select>
        </li>
        <li>
            <span class="title"><i class="star">*</i>用车范围：</span> 
            <select id="basicSelect2" data-bind="ojComponent: {component: 'ojSelect',value: __type,rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('system_dictionary_104', false)}">
            </select>
        </li>
        <li>
            <span class="title"><i class="star">*</i>申请用车车型：</span> 
            <select id="basicSelect2" data-bind="ojComponent: {component: 'ojSelect',value: __address,rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('system_dictionary_122', false)}">
            </select>
        </li>
        <li>
            <span class="title"><i class="star">*</i>出发地：</span> 
            <input data-bind="value: __projectName" />
        </li>
        <li>
            <span class="titlelong"><i class="star">*</i>目的地所在区域：</span> 
            <select id="basicSelect2" data-bind="ojComponent: {component: 'ojSelect',value: __endDateDetail,rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('use_car_to_area', false)}">
            </select>
        </li>
        <li>
            <span class="titlelong"><i class="star">*</i>目的地详细地址：</span>   <input data-bind="value: __projectCode" />
        </li>
        <li>
            <span class="title">预计用车费用：</span>   <span class="textmany" data-bind="text: __livingExpenses"></span>
        </li>
        <li>
            <span class="title"><i class="star">*</i>用车目的：</span>   <input class="textmany" data-bind="value: __reason" />
        </li>
        <li data-bind="visible: isshow()">
            <span class="title"><i class="star"></i>项目经理：</span> 
            <input id="basicSelect1" data-bind="ojComponent: {component: 'ojInputSearch',value: __nextAuditor,placeholder: '',rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('employees', false)}"/>
        </li>
         <li  style='min-height: 45px;height: auto;overflow-y: auto;max-height: 100px;'>
            <span class="title">行程安排：</span>   
            <textarea style='min-height: 45px;line-height: 35px;flex: 2;padding: 2px;border:none;' data-bind="value: __plan"></textarea>
        </li>
        <li>
            <span class="title">备注信息：</span>   <input class="textmany" data-bind="value: __remark" />
        </li>
     </ul>
        <p class="navTitle">费用分摊</p>
        <ul class='otherUl' data-bind="foreach:__detailCarCostAllocation">
            <li style="padding: 10px 10px 10px 0;">
                <p data-bind="visible: $parent.isshowDetail2()"><span>前期项目名称：</span><b data-bind="text: name"></b></p>
                <p data-bind="visible: $parent.isshowDetail1()"><span>订单名称：</span><b data-bind="text: name"></b></p>
                <p data-bind="visible: $parent.isshowDetail3()"><span>部门：</span><b data-bind="text:dl.getLabelByValue('all_departments', id)"></b></p>

                <p data-bind="visible: $parent.isshowDetail2()"><span>前期项目：</span><b data-bind="text: id"></b></p>
                <p data-bind="visible: $parent.isshowDetail1()"><span>订单：</span><b data-bind="text: id"></b></p>

                <p data-bind="visible: $parent.isshowDetail2()"><span>前期项目编号：</span><b data-bind="text: code"></b></p>
                <p data-bind="visible: $parent.isshowDetail1()"><span>订单编号：</span><b data-bind="text: code"></b></p>

                <p><span>总用车费用：</span><b style='font-size:13px;' data-bind="text: cost"></b></p>

                <p><span>成本分摊比例(%)：</span><b style='font-size:13px;' data-bind="text: percent"></b></p>

                <p><span>成本分摊：</span><b style='font-size:13px;' data-bind="text: costAllocation"></b></p>
            </li>
        </ul>
          <button class='addOne' data-bind="event: {click: addOne}">新增</button>
          <button class='delete' data-bind="event:{click: deleteFun}">删除</button>
    </div>
    <!--操作部分-->
    <div id='othermenu' style="padding-top: 30px;" data-bind="visible: ulShow()==1">
      <ul class='list' style="margin-top: 15px;margin-bottom:50px;">
          <!--项目用车1 前期项目用车2  部门用车3 --> 
        <li data-bind="visible: isshowDetail1()">
            <span class="title"><i class="star"></i>订单：</span> 
            <oj-select-one id="basicSelect2" value="{{__id}}" options="[[contractProjects]]" style='flex:2;'>
            </oj-select-one>
        </li>
        <li data-bind="visible: isshowDetail1()">
            <span class="title">订单编号：</span></br>   <span data-bind="text: __code"></span>
        </li>
        <li data-bind="visible: isshowDetail1()">
            <span class="title">订单名称：</span></br>   <span data-bind="text: __name"></span>
        </li>
         <li data-bind="visible: isshowDetail2()">
            <span class="titlelong"><i class="star"></i>请选择前期项目：</span> 
            <oj-select-one id="basicSelect2" value="{{__id}}" options="[[preProjects]]" style='flex:2;'>
            </oj-select-one>
        </li>
        <li data-bind="visible: isshowDetail2()">
            <span class="titlelong">前期项目编号：</span></br>   <span data-bind="text: __code"></span>
        </li>
        <li data-bind="visible: isshowDetail2()">
            <span class="title">前期项目名称：</span></br>   <span data-bind="text: __name"></span>
        </li>
        
        <li data-bind="visible: isshowDetail3()">
            <span class="title"><i class="star"></i>部门：</span> 
            <oj-select-one id="basicSelect2" value="{{__id}}"  options="[[ dl.getOptionsByName('departments', false)]]" style='flex:2;'>
            </oj-select-one>
        </li>
        <li>
            <span class="title">总用车费用：</span>   <span style="border:none;flex:2;" data-bind="text: __cost"></span>
        </li>
         <li>
            <span class="titlelong">成本分摊比例(%)：</span>   <input style="border:none;flex:2;" data-bind="value: __percent" />
        </li>
         <li>
             <span class="title">成本分摊：</span>   <span style="border:none;flex:2;" data-bind="text: __costAllocation"></span>
        </li>
      </ul>
        
         <button class='save' data-bind="event:{click: save}">保存</button>
    </div>
</div>
<div class=" mar20 zjList" style="margin-top: 40px;" data-bind="visible: ulShow()==0">
    <p class='attention'>温馨提示：出发地不是填写'公司'或'科兴科学园'的，或者目的地所在区域选择的是'其他'的，将由行政部事后根据实际用车费用录入系统</p>
    <p style="font-weight:bold;color:#FF7F27;" data-bind="text:errorMessage"></p>
</div>
<button class='mar20 jindu mb40' data-bind="event: {click: submitClick},visible: ulShow()==0">提交</button>
<style>
    #othermenu{
        margin-top: 10px;
        position: relative;
    }
    .otherUl {
        margin:0;
        background: #fff;
    }
    .otherUl li{
        border-bottom: 2px solid #ccc;
    } 
    .otherUl span{ 
        color: #999;
    }
     .otherUl li p b{ 
        color: #333;
        font-size: 13px;
            line-height: 22px;
            font-weight: normal;
    }
    .addOne{
            position: absolute;
            right: 10px;
            bottom:-36px;
            border-radius: 12px;
            width: 70px;
            height: 30px;
            border: none;
            background: #00ccff;
            color: #fff;
            font-size: 14px;
    }
     .save{
            position: absolute;
            right: 135px;
            bottom: -45px;
            border-radius: 12px;
            width: 70px;
            height: 30px;
            border: none;
            background: #00ccff;
            color: #fff;
            font-size: 14px;
    }
     .delete{
            position: absolute;
           left: 10px;
            bottom: -36px;
            border-radius: 12px;
            width: 70px;
            height: 30px;
            border: none;
             background: #00ccff;
            color: #fff;
            font-size: 14px;
    }
</style>
