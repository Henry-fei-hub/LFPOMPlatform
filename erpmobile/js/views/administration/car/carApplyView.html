
<div id="cNnavlistcontainer" class="demo-panel-contrast1 oj-contrast-marker">
    <div class="topHeader" >
        <button class="buttonIcon2 arrLeft"
                data-bind=" click: dl.backToClick,
                               ojComponent: {
                                   component:'ojButton', 
                                   icons: {start:'oj-fwk-icon-caret-start oj-fwk-icon'}, 
                                   label: ''
                               }">
        </button>
        <h3 id="header" class="itemTitle" data-bind="text:specialHeaderTitle"></h3>
    </div>

    <div class="disFlex mt70" data-bind='visible: isApproval()'>
        <button class="button" data-bind="attr: {id : 0}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '同意'}"></button>
        <button class="button" data-bind="attr: {id : 1}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '驳回'}"></button>
        <button class="button" data-bind="attr: {id : 2}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '回退'}"></button>
        <button class="button" data-bind="attr: {id : 3}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '转交'}"></button>
    </div>   
    <button class='mar20 jindu' data-bind="event: {click: jinduClick},style:{marginTop:isApproval()? '20px' :'70px'}">进度</button>
    <div id='mainmenu'>
        <ul class='list'>
            <li>
                <span class="title">申请人：</span>   <span data-bind="text:dl.getLabelByValue('employees', __employeeId())"></span>
            </li>
            <li>
                <span class="title">归属公司：</span>   <span data-bind="text:dl.getLabelByValue('system_dictionary_26', __companyId())"></span>
            </li>
            <li>
                <span class="title">工号：</span>   <span data-bind="text:__employeeNo"></span>
            </li>
            <li>
                <span class="title">部门：</span>   <span data-bind="text:dl.getLabelByValue('departments',__departmentId())"></span>
            </li>
            <li>
                <span class="title">手机号码：</span>   <span class="textmany" data-bind="text:__card"></span>
            </li>
            <li>
                <span class="title">同行人数：</span>   <span class="textmany" data-bind="text:__unit"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">
                <span class="titlelong">用车开始时间：</span>   <span data-bind="text: dl.datetimeConverter.format(dl.parseValueFromService(__startDate()))"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">
                <span class="titlelong">预计结束时间：</span>   <span data-bind="text: dl.datetimeConverter.format(dl.parseValueFromService(__endDate()))"></span>
            </li>  
            <li data-bind="visible: !isshowUpdate()">
                <span class="title">用车类型：</span>   <span data-bind="text:dl.getLabelByValue('system_dictionary_119', __startDateDetail())"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">
                <span class="title">用车范围：</span>   <span data-bind="text:dl.getLabelByValue('system_dictionary_104', __type())"></span>
            </li>   
            <li data-bind="visible: !isshowUpdate()">
                <span class="title">申请用车车型：</span>   <span data-bind="text:dl.getLabelByValue('system_dictionary_122', __address())"></span>
            </li>  
            <li data-bind="visible: !isshowUpdate()">
                <span class="title">出发地：</span>   <span class="textmany" data-bind="text:__projectName"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">
                <span class="titlelong">目的地所在区域：</span>  <span data-bind="text:dl.getLabelByValue('use_car_to_area', __endDateDetail())"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">
                <span class="titlelong">目的地详细地址：</span>   <span data-bind="text:__projectCode"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">
                <span class="title">用车费用：</span>   <span data-bind="text: __fee"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">         
                <span class="title">用车目的：</span>   <span data-bind="text:__reason"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">         
                <span class="titlelong"><i class="star"></i>内部派车/外部派车：</span>  
                <span data-bind="text:dl.getLabelByValue('system_dictionary_105', __subType())"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()&& isshowitem()">         
                <span class="title"><i class="star"></i>车辆信息：</span> 
                <span data-bind="text:dl.getLabelByValue('system_dictionary_106', __targetProvince())"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()&& isshowitem()">         
                <span class="title"><i class="star"></i>司机：</span>  
                <span data-bind="text:dl.getLabelByValue('employees', __contactPerson())"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">   
                <span class="title">行程安排：</span>   <span class="textmany" data-bind="text:__plan"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">   
                <span class="title">备注：</span>   <span class="textmany" data-bind="text:__remark"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">   
                <span class="title">实际公里数：</span>   <span class="textmany" data-bind="text:__transportation"></span>
            </li>
            <li data-bind="visible: !isshowUpdate()">   
                <span class="titlelonger">修改用车成本的原因：</span>   <span class="textmany" data-bind="text:__subTypeStr"></span>
            </li>


            <li data-bind="visible: isshowUpdate">
                <span class="titlelong">用车开始时间：</span>   
                <input id="projecttest-completed_time" data-bind="ojComponent: {component: 'ojInputDateTime', value:dl.parseValueFromService( __startDate()), converter: dl.dateTimeConverter}"/>
            </li>
            <li data-bind="visible: isshowUpdate">
                <span class="titlelong">预计结束时间：</span>  
                <input id="projecttest-completed_time" data-bind="ojComponent: {component: 'ojInputDateTime', value:dl.parseValueFromService( __endDate()), converter: dl.dateTimeConverter}"/>
            </li>  
            <li data-bind="visible: isshowUpdate">
                <span class="title">用车类型：</span>   
                <input style='max-width: 200px;' data-bind="ojComponent: {component: 'ojSelect', value: __startDateDetail, rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('system_dictionary_119',true)}"/>
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="title"><i class="star">*</i>用车范围：</span> 
                <select id="basicSelect2" data-bind="ojComponent: {component: 'ojSelect',value: __type,rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('system_dictionary_104', true)}">
                </select>
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="titlelong"><i class="star">*</i>申请用车车型：</span> 
                <select id="basicSelect2" data-bind="ojComponent: {component: 'ojSelect',value: __address(),rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('system_dictionary_122', false)}">
                    <!--显示有问题 看看 value的类型 string 对应 false--> 
                </select>
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="title"><i class="star">*</i>出发地：</span> 
                <input data-bind="value: __projectName" />
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="titlelong"><i class="star">*</i>目的地所在区域：</span> 
                <select id="basicSelect2" data-bind="ojComponent: {component: 'ojSelect',value: __endDateDetail,rootAttributes: {style:'flex:2;max-width:none;'}, options: dl.getOptionsByName('use_car_to_area', true)}">
                </select>
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="titlelong"><i class="star">*</i>目的地详细地址：</span>   <input data-bind="value: __projectCode" />
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="titlelong">预计用车费用：</span>   <input data-bind="value: __livingExpenses" />
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="titlelong">实际用车费用：</span>   <input data-bind="value:__fee" />
            </li>
            <li data-bind="visible: isshowUpdate()">   
                <span class="title">实际公里数：</span>   <input class="textmany" data-bind="value:__transportation"/>
            </li>
            <li data-bind="visible: isshowUpdate()">   
                <span class="titlelonger">修改用车成本的原因：</span>   <input class="textmany" data-bind="value:__subTypeStr"/>
            </li>
            <li data-bind="visible: isshowUpdate()">            
                <span class="title">用车目的：</span>   <input data-bind="value:__reason"/>
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="titlelonger"><i class="star"></i>内部派车/外部派车：</span>  
                <input style='max-width: 200px;' data-bind="ojComponent: {component: 'ojSelect', value: __subType, options: dl.getOptionsByName('system_dictionary_105',false)}"/>
            </li>
            <li data-bind="visible: isshowUpdate()&& isshowitem()">
                <span class="title"><i class="star"></i>车辆信息：</span> 
                <input style='max-width: 200px;' data-bind="ojComponent: {component: 'ojSelect', value: __targetProvince, options: dl.getOptionsByName('system_dictionary_106',true)}"/>
            </li>
            <li data-bind="visible: isshowUpdate()&& isshowitem()">
                <span class="title"><i class="star"></i>司机：</span>  
                <input style='max-width: 200px;' data-bind="ojComponent: {component: 'ojSelect', value: __contactPerson, options:contactPersonArr}"/>
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="title">行程安排：</span>   <input class="textmany" data-bind="value:__plan"/>
            </li>
            <li data-bind="visible: isshowUpdate()">
                <span class="title">备注：</span>   <input class="textmany" data-bind="value:__remark"/>
            </li>
        </ul>
    </div>
    <h3 class="navTitle">费用分摊</h3>
<!--       <oj-list-view id="listview" aria-label="list using observable array" 
                data="[[dataProvider]]" selection-mode="multiple">
              <template slot="itemTemplate" data-oj-as="item">
                  <span>
                      <oj-bind-text value='[[item.data.cost]]'></oj-bind-text>
                  </span>
              </template>
            </oj-list-view>-->
    
    <div id='mainmenu' data-bind="visible: isShow()==1 , ojComponent:{
                            component:'ojListView',
                            drillMode:'sliding',
                            data: dataSource1,
                            item: { template: 'folder_template1' }
                }">

    </div>
    <script type="text/html" id="folder_template1">
        <ul class='list'>
            <li>
                <span class="title">订单：</span>    <span data-bind="text: $data.id"></span>
            </li>
            <li>
                <span class="title">订单编号：</span>   <span data-bind="text: $data.code"></span>
            </li>
            <li>
                <span class="title">订单名称：</span>   <span data-bind="text: $data.name"></span>
            </li>
            <li>
                <span class="title">总用车费用：</span>   <span data-bind="text:$data.cost"></span>
            </li>      
            <li>
                <span class="titlelong">成本分摊比例(%)：</span>   <span data-bind="text:$data.percent"></span>
            </li>
            <li>
                <span class="title">成本分摊：</span>   <span data-bind="text:$data.costAllocation"></span>
            </li>  
        </ul>
    </script>
    <div id='mainmenu' data-bind="visible: isShow()==2 , ojComponent:{
                            component:'ojListView',
                            drillMode:'sliding',
                            data: dataSource1,
                            item: { template: 'folder_template2' }
                }">

    </div>
    <script type="text/html" id="folder_template2">
             <ul class='list' >
            <li>
                <span class="titlelong">请选择前期项目：</span>   <span data-bind="text:$data.id"></span>
            </li>
            <li>
                <span class="title">前期项目编号：</span>     <span data-bind="text:$data.code"></span>
            </li>
            <li>
                <span class="titlelong">前期项目名称：</span>    <span data-bind="text:$data.name"></span>
            </li>
            <li>
                <span class="title">总用车费用：</span>   <span data-bind="text:$data.cost"></span>
            </li>   
            <li>
                <span class="titlelong">成本分摊比例(%)：</span>   <span data-bind="text:$data.percent"></span>
            </li>
            <li>
                <span class="title">成本分摊：</span>  <span data-bind="text:$data.costAllocation"></span>
            </li>  
        </ul>
    </script>
    <div id='mainmenu' data-bind="visible: isShow()==3 , ojComponent:{
                            component:'ojListView',
                            drillMode:'sliding',
                            data: dataSource1,
                            item: { template: 'folder_template3' }
                }">

    </div>
    <script type="text/html" id="folder_template3">
              <ul class='list' style='border-top: 2px solid #ccc;'>
            <li>
                <span class="title">部门：</span>   <span data-bind="text:$data.name"></span>
            </li>
            <li>
                <span class="title">总用车费用：</span>   <span data-bind="text:$data.cost"></span>
            </li>
            <li>
                <span class="titlelong">成本分摊比例(%)：</span>  <span data-bind="text:$data.percent"></span>
            </li>
            <li>
                <span class="title">成本分摊：</span>   <span data-bind="text:$data.costAllocation"></span>
            </li>      
        </ul>
    </script>
    <div class="zjList" style='padding: 15px;'>
        <span style="font-weight:bold;color:red;" data-bind="text:errorMessage"></span>
    </div>
    <div class=" mar20 zjList" data-bind='visible: isApproval()'>
        <span class="w75 textR">转交人：</span>
        <input style='margin:5px;' id="projectwithp-status" data-bind="ojComponent: {component: 'ojSelect', placeholder: '', value: additionalApprovalment, options: dl.getOptionsByName('employees', true)}"/>
    </div>
    <div class=" mar20 zjList"  data-bind='visible: isApproval()'>
        <span class="w75">审批意见：</span>
        <textarea id="textarea1" 
                  type="text"
                  class="oj-form-control oj-textarea-nocomp"
                  data-bind="value: processComment">
        </textarea>    
    </div>

    <div class="mar20 disFlex" data-bind='visible: isApproval()'>
        <button class="button" data-bind="attr: {id : 0}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '同意'}"></button>
        <button class="button" data-bind="attr: {id : 1}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '驳回'}"></button>
        <button class="button" data-bind="attr: {id : 2}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '回退'}"></button>
        <button class="button" data-bind="attr: {id : 3}, event: {click: submitClick}, ojComponent: {component: 'ojButton', label: '转交'}"></button>
    </div>   
    <button class='mar20 jindu mb40' data-bind="event: {click: jinduClick}">进度</button>




