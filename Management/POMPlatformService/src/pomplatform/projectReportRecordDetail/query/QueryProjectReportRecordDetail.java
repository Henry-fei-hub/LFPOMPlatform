package pomplatform.projectReportRecordDetail.query;

import org.apache.log4j.Logger;
import delicacy.common.KeyValuePair;
import delicacy.common.AbstractQuery;
import delicacy.common.GenericBase;
import delicacy.common.BaseCollection;
import delicacy.connection.ThreadConnection;
import pomplatform.projectReportRecordDetail.bean.BaseProjectReportRecordDetail;
import pomplatform.projectReportRecordDetail.bean.ConditionProjectReportRecordDetail;

public class QueryProjectReportRecordDetail extends AbstractQuery<BaseProjectReportRecordDetail, ConditionProjectReportRecordDetail>
{

	private static final Logger __logger = Logger.getLogger(QueryProjectReportRecordDetail.class);

	public QueryProjectReportRecordDetail() throws java.sql.SQLException
	{
		setParameterNumber(34);
		setConnection(ThreadConnection.getConnection());
		setOrderByFields("A .plate_id");
	}

	@Override
	public BaseCollection<BaseProjectReportRecordDetail> executeQuery( KeyValuePair[] replacements, ConditionProjectReportRecordDetail condition ) throws java.sql.SQLException {
		if(__queryConditions != null && __queryConditions.length > 0) return execute(replacements, condition);
		if(condition.getCurrentPage() > 0) {
			setCurrentPage(condition.getCurrentPage());
			setPageLines(condition.getPageLines());
		}
		return executeQuery(replacements,
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getPlateId(),
				condition.getContractCode(),
				condition.getProjectCode(),
				condition.getProjectName(),
				condition.getProjectFlag(),
				condition.getStatus(),
				condition.getContractId(),
				condition.getDepartmentManagerId(),
				condition.getProjectType(),
				condition.getMainProjectStageId(),
				condition.getEmployeeNameTostring5()
		);
	}

	public BaseCollection<BaseProjectReportRecordDetail> runQuery( KeyValuePair[] replacements, ConditionProjectReportRecordDetail condition ) throws java.sql.SQLException {
		if(condition.getCurrentPage() > 0) {
			setCurrentPage(condition.getCurrentPage());
			setPageLines(condition.getPageLines());
		}
		return runQuery(replacements,
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getPlateId(),
				condition.getContractCode(),
				condition.getProjectCode(),
				condition.getProjectName(),
				condition.getProjectFlag(),
				condition.getStatus(),
				condition.getContractId(),
				condition.getDepartmentManagerId(),
				condition.getProjectType(),
				condition.getMainProjectStageId(),
				condition.getEmployeeNameTostring5()
		);
	}

	public BaseCollection<BaseProjectReportRecordDetail> execute( KeyValuePair[] replacements, ConditionProjectReportRecordDetail condition ) throws java.sql.SQLException {
		if(__queryConditions == null || __queryConditions.length == 0) return executeQuery(replacements, condition);
		if(condition.getCurrentPage() > 0) {
			setCurrentPage(condition.getCurrentPage());
			setPageLines(condition.getPageLines());
		}
		return execute(condition, replacements,
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getStartDate(),
				condition.getEndDate(),
				condition.getPlateId(),
				condition.getContractCode(),
				condition.getProjectCode(),
				condition.getProjectName(),
				condition.getProjectFlag(),
				condition.getStatus(),
				condition.getContractId(),
				condition.getDepartmentManagerId(),
				condition.getProjectType(),
				condition.getMainProjectStageId(),
				condition.getEmployeeNameTostring5()
		);
	}

	@Override
	public BaseProjectReportRecordDetail generateBase(Object[] __data) throws java.sql.SQLException {
		BaseProjectReportRecordDetail __base = new BaseProjectReportRecordDetail();
		int count = 0;
		Object val;
		if((val = __data[count++]) != null) __base.setPlateId(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setProjectId(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setContractCode(GenericBase.__getString(val));
		if((val = __data[count++]) != null) __base.setProjectCode(GenericBase.__getString(val));
		if((val = __data[count++]) != null) __base.setProjectName(GenericBase.__getString(val));
		if((val = __data[count++]) != null) __base.setTotalIntegral(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setComplaintIntegral(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setProjectIntegral(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setReserveIntegral(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setSureIntegral(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setSubtractComplaintIntegral(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setProjectManageId(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setProjectLevel(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setProjectFlag(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setStatus(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setProjectCost(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setProgressPercentage(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setSheetAmount(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setPlateManagerId(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setDepartmentManagerId(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setMsgCount(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setMsgStatus(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setEmployeeNameTostring3(GenericBase.__getString(val));
		if((val = __data[count++]) != null) __base.setEmployeeNameTostring5(GenericBase.__getString(val));
		if((val = __data[count++]) != null) __base.setProjectType(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setMainProjectStageId(GenericBase.__getInt(val));
		if((val = __data[count++]) != null) __base.setSigningMoneySum(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setCumulativeTotalAmountProportion(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setYearTotalAmountProportion(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setYearTotalAmount(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setSurplusYearTotalAmount(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setSurplusYearTotalAmountProportion(GenericBase.__getDecimal(val));
		if((val = __data[count++]) != null) __base.setBorrowMoney(GenericBase.__getDecimal(val));
		return __base;
	}

	@Override
	public int setStatementParameters(int count, java.lang.Object ... args) throws java.sql.SQLException {

		int index = 0;
		for(int ii = 0; ii < args.length; ii++){
			if(args[ii] == null) continue;
			index++;
			__logger.info(String.format("%1$s = [%2$s]", fieldNames[ii], args[ii]));
		}
		if( index > 0 ) __logger.info("=================================================");
		if(args[0] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[0]));
		if(args[1] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[1]));
		if(args[2] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[2]));
		if(args[3] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[3]));
		if(args[4] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[4]));
		if(args[5] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[5]));
		if(args[6] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[6]));
		if(args[7] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[7]));
		if(args[8] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[8]));
		if(args[9] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[9]));
		if(args[10] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[10]));
		if(args[11] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[11]));
		if(args[12] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[12]));
		if(args[13] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[13]));
		if(args[14] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[14]));
		if(args[15] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[15]));
		if(args[16] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[16]));
		if(args[17] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[17]));
		if(args[18] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[18]));
		if(args[19] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[19]));
		if(args[20] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[20]));
		if(args[21] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[21]));
		if(args[22] != null) __statement.setTimestamp(count++, generateTimestampFromDate((java.util.Date)args[22]));
		if(args[23] != null) __statement.setInt(count++, GenericBase.__getInt(args[23]));
		if(args[24] != null) __statement.setString(count++, GenericBase.__getString(args[24]));
		if(args[25] != null) __statement.setString(count++, GenericBase.__getString(args[25]));
		if(args[26] != null) __statement.setString(count++, GenericBase.__getString(args[26]));
		if(args[27] != null) __statement.setInt(count++, GenericBase.__getInt(args[27]));
		if(args[28] != null) __statement.setInt(count++, GenericBase.__getInt(args[28]));
		if(args[29] != null) __statement.setInt(count++, GenericBase.__getInt(args[29]));
		if(args[30] != null) __statement.setInt(count++, GenericBase.__getInt(args[30]));
		if(args[31] != null) __statement.setInt(count++, GenericBase.__getInt(args[31]));
		if(args[32] != null) __statement.setInt(count++, GenericBase.__getInt(args[32]));
		if(args[33] != null) __statement.setString(count++, GenericBase.__getString(args[33]));
		return count;
	}

	@Override
	public String getSQLText() {
		return __SQLText;
	}

	@Override
	public String getOriginalSQLText() {
		return __originalSQL;
	}

	@Override
	public String[] getQueryStringArray()  {
		return __queryConditions;
	}

	@Override
	public String getFieldList(){
		return RESULTSETFIELDLIST;
	}

	@Override
	public String[] getConditionNames(){
		return fieldNames;
	}

	private final static String __SQLText = "SELECT A .plate_id, A.project_id, A.contract_code, A.project_code, A.project_name, A.total_integral, A.complaint_integral, A.project_integral, A.reserve_integral, CASE WHEN b.sure_integral > 0 THEN b.sure_integral ELSE 0 END AS sure_integral, 0 AS subtract_complaint_integral, A.project_manage_id, A.project_level, A.project_flag, A.status, CASE WHEN C.project_cost > 0 THEN C.project_cost ELSE 0 END AS project_cost, CASE WHEN A.project_integral > 0 THEN round( ( COALESCE ( ( b.sure_integral ), 0 ) * 100 / A.project_integral ), 2 ) ELSE 0 END AS progress_percentage, CASE WHEN A.sheet_amount > 0 THEN A.sheet_amount ELSE 0 END AS sheet_amount, A.plate_manager_id, A.department_manager_id, CASE WHEN cm.msg_count IS NULL THEN 0 ELSE cm.msg_count END AS msg_count, CASE WHEN cm.msg_status IS NULL THEN 0 ELSE cm.msg_status END AS msg_status, AAA.employee_name_toString_3, AAA.employee_name_toString_5, mp.project_type, mp.main_project_stage_id, cc.signing_money_sum, CASE WHEN A.project_integral > 0 THEN round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date <= ? ), 0 ) * 100 / A.project_integral ), 2 ) ELSE 0.00 END AS cumulative_total_amount_proportion, CASE WHEN A.project_integral > 0 THEN CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE (ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ?) ) is null THEN 0.00 ELSE round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ? ), 0 ) * 100 / A.project_integral ), 2 ) END ELSE 0.00 END AS year_total_amount_proportion, CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE (ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ?) ) is null THEN 0 ELSE ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE (ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ?) ) END AS year_total_amount, CASE WHEN A.project_integral > 0 THEN CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE (ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ?) ) is null THEN A.project_integral ELSE A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ? ) END ELSE 0 END AS surplus_year_total_amount, CASE WHEN A.project_integral > 0 THEN CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE (ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ?) ) is null THEN 100.00 ELSE round(( COALESCE ( A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 and ps.project_id = A.project_id and ps.settlement_date >= ? and ps.settlement_date <= ? ), 0 ) * 100 / A.project_integral ), 2 ) END ELSE 0 END AS surplus_year_total_amount_proportion, CASE WHEN cc.signing_money_sum > 0 THEN round(( COALESCE (( SELECT SUM ( ccc.borrow_money ) AS borrow_money FROM capitals ccc WHERE ccc.contract_id > 0 and ccc.money_attribute = 1 and ccc.happen_date >= ? and ccc.happen_date <= ? and ccc.contract_id = cc.contract_id ), 0 ) * 100 / cc.signing_money_sum ), 2 ) ELSE 0 END AS borrow_money FROM projects A LEFT JOIN ( SELECT project_id, SUM ( total_amount ) AS sure_integral FROM project_settlements WHERE settlement_status = 2 and settlement_date >= ? and settlement_date <= ? GROUP BY project_id ) AS b ON A.project_id = b.project_id LEFT JOIN ( SELECT project_id, SUM ( amount ) AS project_cost FROM project_cost WHERE cost_date >= ? and cost_date <= ? GROUP BY project_id ) AS C ON A.project_id = C.project_id LEFT JOIN ( SELECT * FROM contract_messages cm WHERE cm.create_time IN ( SELECT MAX ( b.create_time ) FROM contract_messages b WHERE b.msg_status = 1 GROUP BY b.contract_id ) ) AS cm ON A.contract_id = cm.contract_id LEFT JOIN ( SELECT mp.project_code, B.employee_name_toString_3, C.employee_name_toString_5 FROM main_projects mp LEFT JOIN ( SELECT main_project_id, array_to_string( ARRAY_AGG ( e.employee_name ), ',' ) AS employee_name_toString_3 FROM main_project_employees mpe LEFT JOIN employees e ON mpe.employee_id = e.employee_id WHERE mpe.relation = 3 AND mpe.employee_id > 0 AND mpe.main_project_id > 0 GROUP BY mpe.main_project_id ) AS B ON mp.main_project_id = B.main_project_id LEFT JOIN ( SELECT main_project_id, array_to_string( ARRAY_AGG ( e.employee_name ), ',' ) AS employee_name_toString_5 FROM main_project_employees mpe LEFT JOIN employees e ON mpe.employee_id = e.employee_id WHERE mpe.relation = 5 AND mpe.employee_id > 0 AND mpe.main_project_id > 0 GROUP BY mpe.main_project_id ) AS C ON mp.main_project_id = C.main_project_id ) AS AAA ON AAA.project_code = A.project_code LEFT JOIN main_projects mp ON mp.project_code = A.project_code LEFT JOIN contracts cc ON cc.project_code = mp.project_code WHERE A.plate_id > 0 and A.plate_id = ? and A.contract_code like ? and A.project_code like ? and A.project_name like ? and A.project_flag = ? and A.status = ? and A.contract_id = ? and A.department_manager_id = ? and mp.project_type = ? and mp.main_project_stage_id = ? and AAA.employee_name_toString_5 like ? ORDER BY A.project_id" ;
	private final static String __originalSQL = "SELECT A .plate_id, A.project_id, A.contract_code, A.project_code, A.project_name, A.total_integral, A.complaint_integral, A.project_integral, A.reserve_integral, CASE WHEN b.sure_integral > 0 THEN b.sure_integral ELSE 0 END AS sure_integral, 0 AS subtract_complaint_integral, A.project_manage_id, A.project_level, A.project_flag, A.status, CASE WHEN C.project_cost > 0 THEN C.project_cost ELSE 0 END AS project_cost, CASE WHEN A.project_integral > 0 THEN round( ( COALESCE ( ( b.sure_integral ), 0 ) * 100 / A.project_integral ), 2 ) ELSE 0 END AS progress_percentage, CASE WHEN A.sheet_amount > 0 THEN A.sheet_amount ELSE 0 END AS sheet_amount, A.plate_manager_id, A.department_manager_id, CASE WHEN cm.msg_count IS NULL THEN 0 ELSE cm.msg_count END AS msg_count, CASE WHEN cm.msg_status IS NULL THEN 0 ELSE cm.msg_status END AS msg_status, AAA.employee_name_toString_3, AAA.employee_name_toString_5, mp.project_type, mp.main_project_stage_id, cc.signing_money_sum, CASE WHEN A.project_integral > 0 THEN round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 ) ELSE 0.00 END AS cumulative_total_amount_proportion, CASE WHEN A.project_integral > 0 THEN CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN 0.00 ELSE round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 ) END ELSE 0.00 END AS year_total_amount_proportion, CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN 0 ELSE ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) END AS year_total_amount, CASE WHEN A.project_integral > 0 THEN CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN A.project_integral ELSE A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) END ELSE 0 END AS surplus_year_total_amount, CASE WHEN A.project_integral > 0 THEN CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN 100.00 ELSE round(( COALESCE ( A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 ) END ELSE 0 END AS surplus_year_total_amount_proportion, CASE WHEN cc.signing_money_sum > 0 THEN round(( COALESCE (( SELECT SUM ( ccc.borrow_money ) AS borrow_money FROM capitals ccc WHERE ccc.contract_id > 0 AND ccc.money_attribute = 1 AND ccc.happen_date >= :start_date AND ccc.happen_date <= :end_date AND ccc.contract_id = cc.contract_id ), 0 ) * 100 / cc.signing_money_sum ), 2 ) ELSE 0 END AS borrow_money FROM projects A LEFT JOIN ( SELECT project_id, SUM ( total_amount ) AS sure_integral FROM project_settlements WHERE settlement_status = 2 AND settlement_date >= :start_date AND settlement_date <= :end_date GROUP BY project_id ) AS b ON A.project_id = b.project_id LEFT JOIN ( SELECT project_id, SUM ( amount ) AS project_cost FROM project_cost WHERE cost_date >= :start_date AND cost_date <= :end_date GROUP BY project_id ) AS C ON A.project_id = C.project_id LEFT JOIN ( SELECT * FROM contract_messages cm WHERE cm.create_time IN ( SELECT MAX ( b.create_time ) FROM contract_messages b WHERE b.msg_status = 1 GROUP BY b.contract_id ) ) AS cm ON A.contract_id = cm.contract_id LEFT JOIN ( SELECT mp.project_code, B.employee_name_toString_3, C.employee_name_toString_5 FROM main_projects mp LEFT JOIN ( SELECT main_project_id, array_to_string( ARRAY_AGG ( e.employee_name ), ',' ) AS employee_name_toString_3 FROM main_project_employees mpe LEFT JOIN employees e ON mpe.employee_id = e.employee_id WHERE mpe.relation = 3 AND mpe.employee_id > 0 AND mpe.main_project_id > 0 GROUP BY mpe.main_project_id ) AS B ON mp.main_project_id = B.main_project_id LEFT JOIN ( SELECT main_project_id, array_to_string( ARRAY_AGG ( e.employee_name ), ',' ) AS employee_name_toString_5 FROM main_project_employees mpe LEFT JOIN employees e ON mpe.employee_id = e.employee_id WHERE mpe.relation = 5 AND mpe.employee_id > 0 AND mpe.main_project_id > 0 GROUP BY mpe.main_project_id ) AS C ON mp.main_project_id = C.main_project_id ) AS AAA ON AAA.project_code = A.project_code LEFT JOIN main_projects mp ON mp.project_code = A.project_code LEFT JOIN contracts cc ON cc.project_code = mp.project_code WHERE A.plate_id > 0 AND A.plate_id = :plate_id AND A.contract_code LIKE :contract_code AND A.project_code LIKE :project_code AND A.project_name LIKE :project_name AND A.project_flag = :project_flag AND A.status = :status AND A.contract_id = :contract_id AND A.department_manager_id = :department_manager_id AND mp.project_type = :project_type AND mp.main_project_stage_id = :main_project_stage_id AND AAA.employee_name_toString_5 LIKE :employee_name_toString_5 ORDER BY A.project_id";
	private final static String[] __queryConditions = {
			"[{\"fullCondition\": \"round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 )\",\"startIndex\": 1006,\"stopIndex\":1224,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 )\",\"startIndex\": 1006,\"stopIndex\":1224,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date <= :end_date\",\"startIndex\": 1091,\"stopIndex\":1183,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 1091,\"stopIndex\":1114,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 1120,\"stopIndex\":1147,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 1153,\"stopIndex\":1183,\"variableNum\": 0,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]},{\"fullCondition\": \"CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN 0.00 ELSE round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 ) END\",\"startIndex\": 1317,\"stopIndex\":1811,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN 0.00 ELSE round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 ) END\",\"startIndex\": 1317,\"stopIndex\":1811,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 1327,\"stopIndex\":1534,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 1327,\"stopIndex\":1534,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":true,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 1394,\"stopIndex\":1524,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 1394,\"stopIndex\":1417,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 1423,\"stopIndex\":1450,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 1456,\"stopIndex\":1488,\"variableNum\": 1,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 1494,\"stopIndex\":1524,\"variableNum\": 2,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]},{\"fullCondition\": \"round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 )\",\"startIndex\": 1551,\"stopIndex\":1807,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"round(( COALESCE (( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 )\",\"startIndex\": 1551,\"stopIndex\":1807,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 1636,\"stopIndex\":1766,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 1636,\"stopIndex\":1659,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 1665,\"stopIndex\":1692,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 1698,\"stopIndex\":1730,\"variableNum\": 3,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 1736,\"stopIndex\":1766,\"variableNum\": 4,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]}]}]},{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 1870,\"stopIndex\":2077,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 1870,\"stopIndex\":2077,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":true,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 1937,\"stopIndex\":2067,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 1937,\"stopIndex\":1960,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 1966,\"stopIndex\":1993,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 1999,\"stopIndex\":2031,\"variableNum\": 5,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 2037,\"stopIndex\":2067,\"variableNum\": 6,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]},{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date )\",\"startIndex\": 2091,\"stopIndex\":2290,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date )\",\"startIndex\": 2091,\"stopIndex\":2290,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":true,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 2158,\"stopIndex\":2288,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 2158,\"stopIndex\":2181,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 2187,\"stopIndex\":2214,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 2220,\"stopIndex\":2252,\"variableNum\": 7,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 2258,\"stopIndex\":2288,\"variableNum\": 8,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]},{\"fullCondition\": \"CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN A.project_integral ELSE A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) END\",\"startIndex\": 2356,\"stopIndex\":2828,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN A.project_integral ELSE A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) END\",\"startIndex\": 2356,\"stopIndex\":2828,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 2366,\"stopIndex\":2573,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 2366,\"stopIndex\":2573,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":true,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 2433,\"stopIndex\":2563,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 2433,\"stopIndex\":2456,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 2462,\"stopIndex\":2489,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 2495,\"stopIndex\":2527,\"variableNum\": 9,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 2533,\"stopIndex\":2563,\"variableNum\": 10,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]},{\"fullCondition\": \"A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date )\",\"startIndex\": 2604,\"stopIndex\":2824,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date )\",\"startIndex\": 2604,\"stopIndex\":2824,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 2692,\"stopIndex\":2822,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 2692,\"stopIndex\":2715,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 2721,\"stopIndex\":2748,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 2754,\"stopIndex\":2786,\"variableNum\": 11,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 2792,\"stopIndex\":2822,\"variableNum\": 12,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]}]}]},{\"fullCondition\": \"CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN 100.00 ELSE round(( COALESCE ( A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 ) END\",\"startIndex\": 2909,\"stopIndex\":3427,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"CASE WHEN ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null THEN 100.00 ELSE round(( COALESCE ( A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 ) END\",\"startIndex\": 2909,\"stopIndex\":3427,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 2919,\"stopIndex\":3126,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ) is null\",\"startIndex\": 2919,\"stopIndex\":3126,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":true,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 2986,\"stopIndex\":3116,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 2986,\"stopIndex\":3009,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 3015,\"stopIndex\":3042,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 3048,\"stopIndex\":3080,\"variableNum\": 13,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 3086,\"stopIndex\":3116,\"variableNum\": 14,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]},{\"fullCondition\": \"round(( COALESCE ( A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 )\",\"startIndex\": 3145,\"stopIndex\":3423,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"round(( COALESCE ( A.project_integral - ( SELECT SUM ( ps.total_amount ) FROM project_settlements ps WHERE ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date ), 0 ) * 100 / A.project_integral ), 2 )\",\"startIndex\": 3145,\"stopIndex\":3423,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2 AND ps.project_id = A.project_id AND ps.settlement_date >= :start_date AND ps.settlement_date <= :end_date\",\"startIndex\": 3252,\"stopIndex\":3382,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ps.settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 3252,\"stopIndex\":3275,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.project_id = A.project_id\",\"nextToken\":\"and\",\"startIndex\": 3281,\"stopIndex\":3308,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date >= :start_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 3314,\"stopIndex\":3346,\"variableNum\": 15,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ps.settlement_date <= :end_date\",\"fullFieldName\":\"ps.settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 3352,\"stopIndex\":3382,\"variableNum\": 16,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]}]}]},{\"fullCondition\": \"round(( COALESCE (( SELECT SUM ( ccc.borrow_money ) AS borrow_money FROM capitals ccc WHERE ccc.contract_id > 0 AND ccc.money_attribute = 1 AND ccc.happen_date >= :start_date AND ccc.happen_date <= :end_date AND ccc.contract_id = cc.contract_id ), 0 ) * 100 / cc.signing_money_sum ), 2 )\",\"startIndex\": 3521,\"stopIndex\":3807,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"round(( COALESCE (( SELECT SUM ( ccc.borrow_money ) AS borrow_money FROM capitals ccc WHERE ccc.contract_id > 0 AND ccc.money_attribute = 1 AND ccc.happen_date >= :start_date AND ccc.happen_date <= :end_date AND ccc.contract_id = cc.contract_id ), 0 ) * 100 / cc.signing_money_sum ), 2 )\",\"startIndex\": 3521,\"stopIndex\":3807,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": [{\"fullCondition\": \"ccc.contract_id > 0 AND ccc.money_attribute = 1 AND ccc.happen_date >= :start_date AND ccc.happen_date <= :end_date AND ccc.contract_id = cc.contract_id\",\"startIndex\": 3613,\"stopIndex\":3764,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"ccc.contract_id > 0\",\"nextToken\":\"and\",\"startIndex\": 3613,\"stopIndex\":3631,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ccc.money_attribute = 1\",\"nextToken\":\"and\",\"startIndex\": 3637,\"stopIndex\":3659,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ccc.happen_date >= :start_date\",\"fullFieldName\":\"ccc.happen_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 3665,\"stopIndex\":3694,\"variableNum\": 17,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ccc.happen_date <= :end_date\",\"fullFieldName\":\"ccc.happen_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"nextToken\":\"and\",\"startIndex\": 3700,\"stopIndex\":3727,\"variableNum\": 18,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"ccc.contract_id = cc.contract_id\",\"startIndex\": 3733,\"stopIndex\":3764,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]}]},{\"fullCondition\": \"settlement_status = 2 AND settlement_date >= :start_date AND settlement_date <= :end_date\",\"startIndex\": 3952,\"stopIndex\":4040,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"settlement_status = 2\",\"nextToken\":\"and\",\"startIndex\": 3952,\"stopIndex\":3972,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"settlement_date >= :start_date\",\"fullFieldName\":\"settlement_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 3978,\"stopIndex\":4007,\"variableNum\": 19,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"settlement_date <= :end_date\",\"fullFieldName\":\"settlement_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 4013,\"stopIndex\":4040,\"variableNum\": 20,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]},{\"fullCondition\": \"cost_date >= :start_date AND cost_date <= :end_date\",\"startIndex\": 4186,\"stopIndex\":4236,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"cost_date >= :start_date\",\"fullFieldName\":\"cost_date\",\"operationName\":\">=\",\"variableName\":\"startDate\",\"nextToken\":\"and\",\"startIndex\": 4186,\"stopIndex\":4209,\"variableNum\": 21,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"cost_date <= :end_date\",\"fullFieldName\":\"cost_date\",\"operationName\":\"<=\",\"variableName\":\"endDate\",\"startIndex\": 4215,\"stopIndex\":4236,\"variableNum\": 22,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]},{\"fullCondition\": \"A.plate_id > 0 AND A.plate_id = :plate_id AND A.contract_code LIKE :contract_code AND A.project_code LIKE :project_code AND A.project_name LIKE :project_name AND A.project_flag = :project_flag AND A.status = :status AND A.contract_id = :contract_id AND A.department_manager_id = :department_manager_id AND mp.project_type = :project_type AND mp.main_project_stage_id = :main_project_stage_id AND AAA.employee_name_toString_5 LIKE :employee_name_toString_5\",\"startIndex\": 5521,\"stopIndex\":5975,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":true,\"children\": [{\"fullCondition\": \"A.plate_id > 0\",\"nextToken\":\"and\",\"startIndex\": 5521,\"stopIndex\":5534,\"variableNum\": 0,\"variableCount\": 0,\"isor\":false,\"hasVariable\":false,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.plate_id = :plate_id\",\"fullFieldName\":\"A.plate_id\",\"operationName\":\"=\",\"variableName\":\"plateId\",\"nextToken\":\"and\",\"startIndex\": 5540,\"stopIndex\":5561,\"variableNum\": 23,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.contract_code LIKE :contract_code\",\"fullFieldName\":\"A.contract_code\",\"operationName\":\"like\",\"variableName\":\"contractCode\",\"nextToken\":\"and\",\"startIndex\": 5567,\"stopIndex\":5601,\"variableNum\": 24,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.project_code LIKE :project_code\",\"fullFieldName\":\"A.project_code\",\"operationName\":\"like\",\"variableName\":\"projectCode\",\"nextToken\":\"and\",\"startIndex\": 5607,\"stopIndex\":5639,\"variableNum\": 25,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.project_name LIKE :project_name\",\"fullFieldName\":\"A.project_name\",\"operationName\":\"like\",\"variableName\":\"projectName\",\"nextToken\":\"and\",\"startIndex\": 5645,\"stopIndex\":5677,\"variableNum\": 26,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.project_flag = :project_flag\",\"fullFieldName\":\"A.project_flag\",\"operationName\":\"=\",\"variableName\":\"projectFlag\",\"nextToken\":\"and\",\"startIndex\": 5683,\"stopIndex\":5712,\"variableNum\": 27,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.status = :status\",\"fullFieldName\":\"A.status\",\"operationName\":\"=\",\"variableName\":\"status\",\"nextToken\":\"and\",\"startIndex\": 5718,\"stopIndex\":5735,\"variableNum\": 28,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.contract_id = :contract_id\",\"fullFieldName\":\"A.contract_id\",\"operationName\":\"=\",\"variableName\":\"contractId\",\"nextToken\":\"and\",\"startIndex\": 5741,\"stopIndex\":5768,\"variableNum\": 29,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"A.department_manager_id = :department_manager_id\",\"fullFieldName\":\"A.department_manager_id\",\"operationName\":\"=\",\"variableName\":\"departmentManagerId\",\"nextToken\":\"and\",\"startIndex\": 5774,\"stopIndex\":5821,\"variableNum\": 30,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"mp.project_type = :project_type\",\"fullFieldName\":\"mp.project_type\",\"operationName\":\"=\",\"variableName\":\"projectType\",\"nextToken\":\"and\",\"startIndex\": 5827,\"stopIndex\":5857,\"variableNum\": 31,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"mp.main_project_stage_id = :main_project_stage_id\",\"fullFieldName\":\"mp.main_project_stage_id\",\"operationName\":\"=\",\"variableName\":\"mainProjectStageId\",\"nextToken\":\"and\",\"startIndex\": 5863,\"stopIndex\":5911,\"variableNum\": 32,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []},{\"fullCondition\": \"AAA.employee_name_toString_5 LIKE :employee_name_toString_5\",\"fullFieldName\":\"AAA.employee_name_toString_5\",\"operationName\":\"like\",\"variableName\":\"employeeNameTostring5\",\"startIndex\": 5917,\"stopIndex\":5975,\"variableNum\": 33,\"variableCount\": 1,\"isor\":false,\"hasVariable\":true,\"hasBracket\":false,\"isVariableFirst\":false,\"topLevel\":false,\"children\": []}]}]"
	};
	private final static String RESULTSETFIELDLIST = "plate_id,project_id,contract_code,project_code,project_name,total_integral,complaint_integral,project_integral,reserve_integral,sure_integral,subtract_complaint_integral,project_manage_id,project_level,project_flag,status,project_cost,progress_percentage,sheet_amount,plate_manager_id,department_manager_id,msg_count,msg_status,employee_name_tostring_3,employee_name_tostring_5,project_type,main_project_stage_id,signing_money_sum,cumulative_total_amount_proportion,year_total_amount_proportion,year_total_amount,surplus_year_total_amount,surplus_year_total_amount_proportion,borrow_money";
	private final static String[] fieldNames = { "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "start_date", "end_date", "plate_id", "contract_code", "project_code", "project_name", "project_flag", "status", "contract_id", "department_manager_id", "project_type", "main_project_stage_id", "employee_name_tostring_5"};
}
